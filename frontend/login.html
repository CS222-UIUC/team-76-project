<!-- Source: Learned how to create a login page using GeeksforGeeks -->
<!DOCTYPE html>
<html lang="en">

<head>
    <title>Mr Game & Rate Login Page </title>
    <link rel="stylesheet" href="style.css">

    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js"></script>

    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyCgTCpvms2EU0UygLBjIStvQJwcnHHlIVA",
        authDomain: "mr-game-and-rate.firebaseapp.com",
        projectId: "mr-game-and-rate",
        storageBucket: "mr-game-and-rate.appspot.com",
        messagingSenderId: "1008663096909",
        appId: "1:1008663096909:web:022e05a954138e0f6a3604",
        measurementId: "G-H6355SXVLD"
      };

      firebase.initializeApp(firebaseConfig);

      const auth = firebase.auth();
      const provider = new firebase.auth.GoogleAuthProvider();
    </script>

</head>

<body>
    <!-- Login Form Code -->
    <form action="">
        <label 
        for="first">
            Username:
        </label>
        <!-- inputting username -->
        <input type="text" id="first" name="first" 
            placeholder="Enter your Username" required>
        <label for="password">
            Password:
        </label>
        <!-- inputting password -->
        <input type="password" id="password" name="password" 
            placeholder="Enter your Password" required>
         <!-- button for submitting username and password -->
        <button type="submit"> 
            Submit 
        </button>
    </form>
    <button id="google-login">Sign in with Google</button>

    <script>
    document.getElementById('google-login').addEventListener('click', () => {
        auth.signInWithPopup(provider)
        .then((result) => {
            return result.user.getIdToken();
        })
        .then((idToken) => {
            fetch('/api/google-login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ idToken })
            })
            .then(response => response.json())
            .then(data => {
                console.log('Backend token:', data.token);

            });
        })
        .catch((error) => {
            console.error('Error during sign-in:', error);
        });
    });
    </script>
</body>
</html>
